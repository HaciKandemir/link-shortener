{% extends 'base.html.twig' %}

{% block title %}Hello UrlController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <p>Urls</p>
    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th scope="col">url</th>
                <th scope="col">url hash</th>
                <th scope="col">click count</th>
                <th scope="col">user</th>
            </tr>
        </thead>
        <tbody>
        {% for url in urls %}
            <tr>
                <td>{{ url.url }}</td>
                <td>{{ url.urlhash }}</td>
                <td>{{ url.clickcount }}</td>
                <td>{{ url.userid }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <p>users</p>
    <table class="table table-bordered table-striped">
        <thead>
        <tr>
            <th scope="col">email</th>
            <th scope="col">roles</th>
        </tr>
        </thead>
        <tbody>
        {% for user in users %}
            <tr>
                <td>{{ user.email }}</td>
                <td>
                    {%- for rol in user.roles -%}
                        {{- rol|replace({'ROLE_': ''})|capitalize -}}
                        {{- not loop.last ? ',' -}}
                    {%- endfor -%}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <p>stats</p>
    <table class="table table-bordered table-striped">
        <thead>
        <tr>
            <th scope="col">total user count</th>
            <th scope="col">total shorten count</th>
            <th scope="col">total redirect count</th>
        </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{ user_count }}</td>
                <td>{{ shorten_count }}</td>
                <td>{{ redirect_count }}</td>
            </tr>
        </tbody>
    </table>

</div>
{% endblock %}
